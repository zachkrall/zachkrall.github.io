"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _promise = require("babel-runtime/core-js/promise");

var _promise2 = _interopRequireDefault(_promise);

var _QueryString = require("./QueryString");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function performQuery(store, phenomicFetch, queries) {
  return _promise2.default.all(queries.map(function (key) {
    store.setAsLoading(key);
    return phenomicFetch((0, _QueryString.decode)(key)).then(function (value) {
      store.set(key, value);
    }).catch(function (error) {
      return store.setAsError(key, error);
    });
  }));
}

exports.default = performQuery;