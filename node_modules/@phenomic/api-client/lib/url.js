"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toConsumableArray2 = require("babel-runtime/helpers/toConsumableArray");

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function postfix(url) {
  return url + ".json";
}

var protect = encodeURIComponent;
var urlify = function urlify(pieces) {
  return pieces.filter(function (piece) {
    return typeof piece !== "undefined";
  }).join("/");
};

function url(config) {
  var root = config.root || "";
  if (typeof config === "string") {
    return urlify([root, config]);
  }
  if (typeof config.id === "string") {
    return postfix(urlify([root, config.path ? protect(config.path) : undefined, "item", config.id]));
  }
  return postfix(urlify([root, config.path ? protect(config.path) : undefined, "by-" + protect(config.by), protect(config.value || "1"), protect(config.order || "desc")].concat((0, _toConsumableArray3.default)(config.limit ? ["limit-" + protect(config.limit)] : []), (0, _toConsumableArray3.default)(config.limit && config.after ? ["after-" + protect(config.after)] : []))));
}

exports.default = url;